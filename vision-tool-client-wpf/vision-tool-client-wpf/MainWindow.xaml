<mah:MetroWindow x:Class="vision_tool_client_wpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:vision_tool_client_wpf"
        xmlns:view="clr-namespace:vision_tool_client_wpf.View"
        xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
                 xmlns:b="clr-namespace:vision_tool_client_wpf.Behaviors"
        mc:Ignorable="d"
        Background="#FFF9F9FB"
        Title="" WindowState="Maximized">
    <mah:MetroWindow.Resources>
        <!-- 팔레트 -->
        <Color x:Key="ColPageBg">#FFF9F9FB</Color>
        <Color x:Key="ColPanelBg">#FFFFFFFF</Color>
        <Color x:Key="ColBorder">#FFE7E7EE</Color>
        <Color x:Key="ColTextMain">#FF2B2B3B</Color>
        <Color x:Key="ColAccent">#FF3A51FB</Color>
        <Color x:Key="ColMenuSelectedBg">#FFE6E9FE</Color>
        <!-- (230,233,254) -->
        <SolidColorBrush x:Key="BrushPageBg" Color="{StaticResource ColPageBg}"/>
        <SolidColorBrush x:Key="BrushPanelBg" Color="{StaticResource ColPanelBg}"/>
        <SolidColorBrush x:Key="BrushBorder"   Color="{StaticResource ColBorder}"/>
        <SolidColorBrush x:Key="BrushTextMain" Color="{StaticResource ColTextMain}"/>
        <SolidColorBrush x:Key="BrushAccent"   Color="{StaticResource ColAccent}"/>

        <!-- 카드형 패널 공통 -->
        <Style x:Key="CardBorder" TargetType="Border" >
            <Setter Property="Background" Value="{StaticResource BrushPanelBg}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BrushBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
        </Style>

        <!-- 좌측 메뉴 항목 -->
        <Style x:Key="LeftMenuItem" TargetType="Border">
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="Margin" Value="12,6,12,0"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>

        <!-- 좌측 메뉴: 선택 항목(홈 선택된 상태 예시) -->
        <Style x:Key="LeftMenuItem.Selected" BasedOn="{StaticResource LeftMenuItem}" TargetType="Border">
            <Setter Property="Background" Value="#FFE6E9FE"/>
            <Setter Property="BorderBrush" Value="#FFE6E9FE"/>
        </Style>

        <!-- 필드 박스(입력 패널 용) -->
        <Style x:Key="FieldBox" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource BrushPanelBg}"/>
            <Setter Property="CornerRadius" Value="4"/>
            <Setter Property="BorderBrush" Value="{StaticResource BrushBorder}"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Padding" Value="10"/>
        </Style>
        <Style x:Key="LeftMenuText" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Arial, Segoe UI, Malgun Gothic"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="{StaticResource BrushTextMain}"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
    </mah:MetroWindow.Resources>
    <Grid Background="{StaticResource BrushPageBg}">
        <!-- 베이스 레이아웃 -->
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <!-- 헤더: 40px -->
                <RowDefinition Height="*"/>
                <!-- 본문 -->
            </Grid.RowDefinitions>
            
            <!-- Header -->
            <Border Grid.Row="0" 
                    Background="{StaticResource BrushPanelBg}"
                    BorderBrush="{StaticResource BrushBorder}"
                    BorderThickness="0,0,0,1">
                <Grid Margin="12,0" VerticalAlignment="Center">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <Image Grid.Column="0" Source="/Resources/logoVisionTool.png" />

                    <!-- 우측 프로필 버튼 자리(디자인만) -->
                    <ToggleButton x:Name="ProfileButton" Grid.Column="2" Content="JH" Style="{StaticResource MahApps.Styles.Button.Circle}" Width="30" Height="30"
                            FontWeight="Bold" BorderThickness="0" FontSize="16" Foreground="White" Background="Brown" FontFamily="Arial"
                             />
                    <Popup x:Name="PopupRoot" PlacementTarget="{Binding ElementName=ProfileButton}" 
                           IsOpen="{Binding IsChecked, ElementName=ProfileButton, Mode=TwoWay}"
                           b:PopupPlacement.RightAlignBelow="True"
                           b:PopupPlacement.Gap="10"
                           b:PopupPlacement.TrackWindow="True"
                           Placement="Custom" StaysOpen="True"
                           
                           >
                        <Grid Background="{DynamicResource MahApps.Brushes.ThemeBackground}">
                        <Border BorderBrush="{DynamicResource MahApps.Brushes.ThemeForeground}" BorderThickness="1" CornerRadius="8" >
                            <StackPanel Margin="5">
                                <TextBlock Text="Account" FontSize="14" FontFamily="Arial" FontWeight="Bold" Margin="10" />
                                <StackPanel Orientation="Horizontal">
                                        <Canvas Width="40" Height="40">
                                            <Ellipse Width="40" Height="40" Fill="Brown">
                                                
                                            </Ellipse>
                                        </Canvas>
                                    <StackPanel>
                                        <TextBlock Text="JaeHyeok.Han" FontSize="18" FontWeight="Bold" FontFamily="Arial" Margin="5" />
                                        <TextBlock Text="jaehyeok.han@makinarocks.ai" FontFamily="Arial" Margin="5" />
                                    </StackPanel>
                                </StackPanel>
                                    <Button Background="Transparent" BorderThickness="0" HorizontalAlignment="Left" >
                                        <Button.Content>
                                            <StackPanel Orientation="Horizontal">
                                                <Image Source="/Resources/signout.png" Margin="0,0,10,0" />
                                                <TextBlock Text="Logout" VerticalAlignment="Center" FontFamily="Arial" FontSize="17" />
                                            </StackPanel>
                                        </Button.Content>
                                    </Button>
                                </StackPanel>
                        </Border>
                        </Grid>
                    </Popup>
                        
                </Grid>
            </Border>

            <TabControl Grid.Row="1" TabStripPlacement="Left"  >
                <TabItem FontSize="12" FontWeight="Bold" >
                    <TabItem.Header>
                        <Grid Width="200">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                                
                            </Grid.ColumnDefinitions>

                            <Image Grid.Column="0" Source="/Resources/RealTimeIcon.png" Width="20" Height="20" />
                            <TextBlock Grid.Column="1" Text="실시간 검사" FontFamily="Roboto" Margin="10" />
                        </Grid>
                    </TabItem.Header>
                    <view:RealTimeInspectionView />
                </TabItem>
                <TabItem FontSize="12" FontWeight="Bold" >
                    <TabItem.Header>
                        <Grid Width="200">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />

                            </Grid.ColumnDefinitions>

                            <Image Grid.Column="0" Source="/Resources/cameraIcon.png" Width="20" Height="20" />
                            <TextBlock Grid.Column="1" Text="시스템 설정" FontFamily="Roboto" Margin="10" />
                        </Grid>
                    </TabItem.Header>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                    </Grid>
                </TabItem>
            </TabControl>
        </Grid>

    </Grid>
    
</mah:MetroWindow>
